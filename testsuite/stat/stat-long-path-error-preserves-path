# FEATURE: CONFIG_PLATFORM_MINGW32
# error messages should show user's path, not internal \\?\ prefixed path

LONGPATH="c:/temp/nonexistent_path/longdirname_12345/longdirname_12345/longdirname_12345/longdirname_12345/longdirname_12345/longdirname_12345/longdirname_12345/longdirname_12345/longdirname_12345/longdirname_12345/longdirname_12345/longdirname_12345/file.txt"

output=$(busybox stat "$LONGPATH" 2>&1) && exit 1
echo "$output" | grep -q "$LONGPATH" || { echo "path not in error: $output"; exit 1; }
echo "$output" | grep -q '\\\\?\\\|\\?\' && { echo "internal path leaked: $output"; exit 1; }
true
